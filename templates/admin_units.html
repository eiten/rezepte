{# Template: admin_units.html
    Purpose: Manage units (name, symbol, latex_code, type), and add new entries.
    Notes:
    - Per-row forms post to `/admin/units/update`; add-row posts to `/admin/units/add`.
#}
{% extends "base.html" %}
{% block title %}{{ _("Admin - Einheiten") }}{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto pb-12">
    
    <div class="flex items-center justify-between mb-6">
        <h1 class="text-2xl font-bold text-slate-800">{{ _("Einheiten verwalten") }}</h1>
    </div>

    <div class="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden">
        <table class="w-full border-collapse">
            <thead class="bg-slate-50 border-b border-slate-200">
                <tr>
                    <th class="px-4 py-3 text-left text-[10px] font-bold text-slate-400 uppercase tracking-widest w-16">{{ _("ID") }}</th>
                    <th class="px-4 py-3 text-left text-[10px] font-bold text-slate-400 uppercase tracking-widest">{{ _("Name") }}</th>
                    <th class="px-4 py-3 text-left text-[10px] font-bold text-slate-400 uppercase tracking-widest w-32">{{ _("Symbol") }}</th>
                    <th class="px-4 py-3 text-left text-[10px] font-bold text-slate-400 uppercase tracking-widest w-48">{{ _("LaTeX Code") }}</th>
                    <th class="px-4 py-3 text-left text-[10px] font-bold text-slate-400 uppercase tracking-widest w-24">{{ _("Typ") }}</th>
                    <th class="px-4 py-3 text-right text-[10px] font-bold text-slate-400 uppercase tracking-widest w-24">{{ _("Aktion") }}</th>
                </tr>
            </thead>
            <tbody class="divide-y divide-slate-100">
                {% for unit in units %}
                <tr class="hover:bg-slate-50/50 transition-colors">
                    <form action="/admin/units/update" method="post">
                        <input type="hidden" name="id" value="{{ unit.id }}">
                        <td class="px-4 py-2 text-sm text-slate-500">
                            {{ unit.id }}
                        </td>
                        <td class="px-4 py-2">
                            <input type="text" name="name" value="{{ unit.name }}" required
                                   class="w-full rounded-md border-slate-200 py-1 px-2 text-sm focus:border-accent focus:ring-accent">
                        </td>
                        <td class="px-4 py-2">
                            <input type="text" name="symbol" value="{{ unit.symbol }}" required
                                   class="w-full rounded-md border-slate-200 py-1 px-2 text-sm focus:border-accent focus:ring-accent">
                        </td>
                        <td class="px-4 py-2">
                            <input type="text" name="latex_code" value="{{ unit.latex_code }}" required
                                   class="w-full rounded-md border-slate-200 py-1 px-2 text-sm font-mono focus:border-accent focus:ring-accent">
                        </td>
                        <td class="px-4 py-2">
                            <select name="type" class="w-full rounded-md border-slate-200 py-1 px-2 text-sm focus:border-accent focus:ring-accent">
                                <option value="si" {% if unit.type == 'si' %}selected{% endif %}>SI</option>
                                <option value="text" {% if unit.type == 'text' %}selected{% endif %}>Text</option>
                            </select>
                        </td>
                        <td class="px-4 py-2 text-right">
                            <button type="submit" class="p-2 text-slate-400 hover:text-accent transition-colors" title="{{ _("Speichern") }}">
                                <span class="ph-btn-icon text-xl">&#xE248;</span>
                            </button>
                        </td>
                    </form>
                </tr>
                {% endfor %}

                <tr class="bg-accent-soft/5">
                    <form action="/admin/units/add" method="post">
                        <td class="px-4 py-3 text-sm text-slate-400">
                            {{ _("Neu") }}
                        </td>
                        <td class="px-4 py-3">
                            <input type="text" name="name" placeholder="{{ _("Name...") }}" required
                                   class="w-full rounded-md border-accent/20 py-1 px-2 text-sm focus:border-accent focus:ring-accent bg-white">
                        </td>
                        <td class="px-4 py-3">
                            <input type="text" name="symbol" placeholder="{{ _("g") }}" required
                                   class="w-full rounded-md border-accent/20 py-1 px-2 text-sm focus:border-accent focus:ring-accent bg-white">
                        </td>
                        <td class="px-4 py-3">
                            <input type="text" name="latex_code" placeholder="{{ _("\\gram") }}" required
                                   class="w-full rounded-md border-accent/20 py-1 px-2 text-sm font-mono focus:border-accent focus:ring-accent bg-white">
                        </td>
                        <td class="px-4 py-3">
                            <select name="type" class="w-full rounded-md border-accent/20 py-1 px-2 text-sm focus:border-accent focus:ring-accent bg-white">
                                <option value="si" selected>SI</option>
                                <option value="text">Text</option>
                            </select>
                        </td>
                        <td class="px-4 py-3 text-right">
                            <button type="submit" class="p-2 text-accent hover:text-accent-dark transition-colors" title="{{ _("Hinzuf체gen") }}">
                                <span class="ph-btn-icon text-xl">&#xE3D6;</span>
                            </button>
                        </td>
                    </form>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="mt-6 text-sm text-slate-500">
        <p class="mb-2"><strong>{{ _("Hinweise") }}:</strong></p>
        <ul class="list-disc list-inside space-y-1">
            <li>{{ _("Name: Vollst채ndiger Name der Einheit (z.B. 'Gramm', 'Milliliter')") }}</li>
            <li>{{ _("Symbol: Kurzes Symbol der Einheit (z.B. 'g', 'ml', 'TL')") }}</li>
            <li>{{ _("LaTeX Code: Der LaTeX-Befehl f체r siunitx (z.B. '\\gram', '\\milli\\liter')") }}</li>
            <li>{{ _("Typ: Kategorie der Einheit f체r Gruppierung und Filterung") }}</li>
        </ul>
    </div>
</div>
{% endblock %}
